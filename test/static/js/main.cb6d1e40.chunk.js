(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(89)},46:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),c=(a(46),a(15)),o=a(16),l=a(18),u=a(17),m=a(19),h=a(40),d=a.n(h),f=a(12),p=a.n(f),g=a(11),b=a.n(g),w=a(22),y=a.n(w),v=a(37),E=a(23),k=a(10),x=a.n(k),I=a(13),C=a(5),_=a.n(C),M=a(38),S=a.n(M),j=a(39),F=a.n(j),O=a(50),N=a(52),P={};function A(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.addEventListener("load",function(){r.width=s.width,r.height=s.height,i.drawImage(s,0,0,r.width,r.height);var e=i.getImageData(0,0,r.width,r.height);a(function(e,t){var a=P.create_buffer(e.width,e.height);Module.HEAP8.set(e.data,a),P.encode(a,e.width,e.height,t);var n=P.get_result_pointer(),r=P.get_result_size(),i=new Uint8Array(Module.HEAP8.buffer,n,r),s=new Uint8Array(i);return P.free_result(n),P.destroy_buffer(a),btoa(String.fromCharCode.apply(null,s))}(e,Math.ceil(100*t)))},!1),s.src=e})}function L(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.addEventListener("load",function(){r.width=s.width,r.height=s.height,i.drawImage(s,0,0,r.width,r.height),i.save(),i.beginPath(),i.arc(r.width-0-16,r.height-0-16,16,0,2*Math.PI),i.fillStyle="rgba(53, 67, 90, 0.85)",i.fill(),i.restore(),i.font="30px helvetica",i.textAlign="center",i.fillStyle="#f7f7f7",i.lineWidth=2,i.fillText(t,r.width-0-16,r.height-0-6),a(r.toDataURL("image/png"))},!1),s.src=e})}function G(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(I.a)(x.a.mark(function e(t,a,n){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O.read(t).then(function(e){return n?e.contain(a,a).getBase64Async(O.MIME_PNG).then(function(e){return A(e,1).then(function(){var t=Object(I.a)(x.a.mark(function t(a){var n,r;return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a,r=1;case 2:if(!(btoa(n).length>99999&&r>.2)){t.next=10;break}return r-=.08,console.error("WebP size ".concat(Math.ceil(btoa(n).length/1024),"kb exceeded 100kb, resizing with quality ").concat(r)),t.next=7,A(e,r);case 7:n=t.sent,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}):e.contain(a,a).getBase64Async(O.MIME_PNG)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function z(e,t){return q.apply(this,arguments)}function q(){return(q=Object(I.a)(x.a.mark(function e(t,a){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onloadend=Object(I.a)(x.a.mark(function t(){return x.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"tray"!==a){t.next=9;break}return t.t0=e,t.next=5,G(r.result,96,!1);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 9:if("stickers"!==a){t.next=15;break}return t.t2=e,t.next=13,G(r.result,512,!0);case 13:t.t3=t.sent,(0,t.t2)(t.t3);case 15:t.next=20;break;case 17:t.prev=17,t.t4=t.catch(0),n(t.t4);case 20:case"end":return t.stop()}},t,this,[[0,17]])})),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Module.onRuntimeInitialized=Object(I.a)(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P={version:Module.cwrap("version","number",[]),create_buffer:Module.cwrap("create_buffer","number",["number","number"]),destroy_buffer:Module.cwrap("destroy_buffer","",["number"]),encode:Module.cwrap("encode","",["number","number","number","number"]),free_result:Module.cwrap("free_result","",["number"]),get_result_pointer:Module.cwrap("get_result_pointer","number",[]),get_result_size:Module.cwrap("get_result_size","number",[])},console.log("libwebp loaded, api version: ".concat(P.version()));case 2:case"end":return e.stop()}},e,this)}));var V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({progress:0,errorMsg:"",isSubmitting:!0});var t=a.state,n=t.identifier,r=t.name,i=t.publisher,s=t.trayFile,c=t.stickersFiles;Object(I.a)(x.a.mark(function e(){var t,o,l,u,m,h,d;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(s,"tray");case 2:t=e.sent,o=[],l=Math.ceil(c.length/30),u=[],m=0;case 7:if(!(m<l)){e.next=22;break}if(o.push([]),e.t0=u,1!==l){e.next=14;break}e.t1=t,e.next=17;break;case 14:return e.next=16,L(t,"".concat(m+1));case 16:e.t1=e.sent;case 17:e.t2=e.t1,e.t0.push.call(e.t0,e.t2);case 19:m++,e.next=7;break;case 22:h=0;case 23:if(!(h<c.length)){e.next=32;break}return e.next=26,z(c[h],"stickers");case 26:d=e.sent,a.setState({progress:(h+1)/c.length*100}),o[Math.floor(h/30)].push(d);case 29:h++,e.next=23;break;case 32:l>1&&o[l-1].length<3&&(o[l-1]=Object(E.a)(o[l-2].splice(-(3-o[l-1].length))).concat(Object(E.a)(o[l-1]))),o.map(function(e,t){return{identifier:n+(0===t?"":"_".concat(t+1)),name:r+(0===t?"":" (".concat(t+1,")")),publisher:i,tray_image:u[t].replace("data:image/png;base64,",""),stickers:e.map(function(e){return{image_data:e.replace("data:image/webp;base64,","")}})}}).forEach(function(e){N(new Blob([JSON.stringify(e)]),"".concat(e.identifier,".json"),"application/json"),a.setState({isSubmitting:!1})});case 34:case"end":return e.stop()}},e,this)}))().catch(function(t){console.error(t),a.setState({errorMsg:t.message||e.toString(),isSubmitting:!1})})},a.handleImageChange=function(e,t){e.preventDefault(),"tray"===t?a.setState({trayFile:e.target.files[0]}):"stickers"===t&&a.setState({stickersFiles:e.target.files})},a.handleInputChange=function(e){a.setState(Object(v.a)({},e.target.id,e.target.value))},a.isFormValid=function(){return a.isIdentifierValid()&&a.state.identifier&&a.state.name&&a.state.publisher&&null!=a.state.trayFile&&a.state.stickersFiles&&a.state.stickersFiles.length>=3},a.isSubmittable=function(){return a.isFormValid()&&!a.state.isSubmitting},a.isIdentifierValid=function(){return/^[A-Za-z0-9-_.\s]*$/.test(a.state.identifier)},a.state={identifier:"",name:"",publisher:"",trayFile:null,stickersFiles:null,isSubmitting:!1,progress:0,errorMsg:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(_.a,{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement(_.a.Group,{as:p.a,controlId:"identifier"},r.a.createElement(_.a.Label,{column:!0,sm:4},"Identifier"),r.a.createElement(b.a,{sm:6},r.a.createElement(_.a.Control,{type:"text",required:!0,onChange:this.handleInputChange,isInvalid:!this.isIdentifierValid()}),r.a.createElement(_.a.Control.Feedback,{type:"invalid"},'Alphanumeric characters with ".", "_", "-" or " " only '))),r.a.createElement(_.a.Group,{as:p.a,controlId:"name"},r.a.createElement(_.a.Label,{column:!0,sm:4},"Pack Name"),r.a.createElement(b.a,{sm:6},r.a.createElement(_.a.Control,{type:"text",required:!0,onChange:this.handleInputChange}))),r.a.createElement(_.a.Group,{as:p.a,controlId:"publisher"},r.a.createElement(_.a.Label,{column:!0,sm:4},"Publisher"),r.a.createElement(b.a,{sm:6},r.a.createElement(_.a.Control,{type:"text",required:!0,onChange:this.handleInputChange}))),r.a.createElement(_.a.Group,{as:p.a,controlId:"formTrayFile"},r.a.createElement(_.a.Label,{column:!0,sm:4},"Tray Icon"),r.a.createElement(b.a,{sm:8},r.a.createElement("div",{className:"custom-file"},r.a.createElement(_.a.Control,{className:"custom-file-input",type:"file",required:!0,isValid:!1,onChange:function(t){return e.handleImageChange(t,"tray")},accept:"image/png"}),r.a.createElement(_.a.Label,{className:"custom-file-label"},this.state.trayFile?this.state.trayFile.name:"Choose file (PNG, any resolution)")))),r.a.createElement(_.a.Group,{as:p.a,controlId:"formStickersFiles"},r.a.createElement(_.a.Label,{column:!0,sm:4},"Stickers (3 or more images)"),r.a.createElement(b.a,{sm:8},r.a.createElement("div",{className:"custom-file"},r.a.createElement(_.a.Control,{className:"custom-file-input",type:"file",required:!0,multiple:!0,onChange:function(t){return e.handleImageChange(t,"stickers")},accept:"image/png"}),r.a.createElement(_.a.Label,{className:"custom-file-label"},this.state.stickersFiles&&this.state.stickersFiles.length>0?"".concat(this.state.stickersFiles.length," file(s) selected"):"Choose file (PNG, any resolution)")))),r.a.createElement(S.a,{type:"submit",disabled:!this.isSubmittable()},"Convert Images"),r.a.createElement(F.a,{style:{transition:"none",marginTop:"15px"},now:this.state.progress,hidden:!this.state.isSubmitting&&!this.state.errorMsg,variant:this.state.errorMsg?"danger":""}),r.a.createElement("p",{className:this.state.errorMsg?"text-danger":"text-success",hidden:!this.state.errorMsg&&100!==this.state.progress},this.state.errorMsg||"Images converted!"))}}]),t}(r.a.Component),D=(a(69),function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{style:{marginTop:"20px"}},r.a.createElement(p.a,{className:"justify-content-md-center"},r.a.createElement(b.a,{lg:10},r.a.createElement(y.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(y.a.Brand,null,"WhatsApp Stickers Converter (Chrome Desktop only)")))),r.a.createElement(p.a,{className:"justify-content-md-center"},r.a.createElement(b.a,{lg:10},r.a.createElement(V,null))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.cb6d1e40.chunk.js.map