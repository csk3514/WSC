(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){"use strict";(function(e){var n=a(39),r=a(23),i=a(15),s=a(16),c=a(18),o=a(17),l=a(19),u=a(10),m=a.n(u),h=a(13),f=a(0),d=a.n(f),p=a(5),g=a.n(p),b=a(12),w=a.n(b),y=a(11),v=a.n(y),E=a(40),k=a.n(E),x=a(41),I=a.n(x),C=a(56),_=a(57),M={};function S(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.addEventListener("load",function(){r.width=s.width,r.height=s.height,i.drawImage(s,0,0,r.width,r.height);var e=i.getImageData(0,0,r.width,r.height);a(function(e,t){var a=M.create_buffer(e.width,e.height);Module.HEAP8.set(e.data,a),M.encode(a,e.width,e.height,t);var n=M.get_result_pointer(),r=M.get_result_size(),i=new Uint8Array(Module.HEAP8.buffer,n,r),s=new Uint8Array(i);return M.free_result(n),M.destroy_buffer(a),btoa(String.fromCharCode.apply(null,s))}(e,Math.ceil(100*t)))},!1),s.src=e})}function j(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.addEventListener("load",function(){r.width=s.width,r.height=s.height,i.drawImage(s,0,0,r.width,r.height),i.save(),i.beginPath(),i.arc(r.width-0-16,r.height-0-16,16,0,2*Math.PI),i.fillStyle="rgba(53, 67, 90, 0.85)",i.fill(),i.restore(),i.font="30px helvetica",i.textAlign="center",i.fillStyle="#f7f7f7",i.lineWidth=2,i.fillText(t,r.width-0-16,r.height-0-6),a(r.toDataURL("image/png"))},!1),s.src=e})}function F(e,t,a){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(m.a.mark(function e(t,a,n){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C.read(t).then(function(e){return n?e.contain(a,a).getBase64Async(C.MIME_PNG).then(function(e){return S(e,1).then(function(){var t=Object(h.a)(m.a.mark(function t(a){var n,r;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a,r=1;case 2:if(!(btoa(n).length>99999&&r>.2)){t.next=10;break}return r-=.08,console.error("WebP size ".concat(Math.ceil(btoa(n).length/1024),"kb exceeded 100kb, resizing with quality ").concat(r)),t.next=7,S(e,r);case 7:n=t.sent,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}):e.contain(a,a).getBase64Async(C.MIME_PNG)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function N(e,t){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(m.a.mark(function e(t,a){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onloadend=Object(h.a)(m.a.mark(function t(){return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"tray"!==a){t.next=9;break}return t.t0=e,t.next=5,F(r.result,96,!1);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 9:if("stickers"!==a){t.next=15;break}return t.t2=e,t.next=13,F(r.result,512,!0);case 13:t.t3=t.sent,(0,t.t2)(t.t3);case 15:t.next=20;break;case 17:t.prev=17,t.t4=t.catch(0),n(t.t4);case 20:case"end":return t.stop()}},t,this,[[0,17]])})),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Module.onRuntimeInitialized=Object(h.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:M={version:Module.cwrap("version","number",[]),create_buffer:Module.cwrap("create_buffer","number",["number","number"]),destroy_buffer:Module.cwrap("destroy_buffer","",["number"]),encode:Module.cwrap("encode","",["number","number","number","number"]),free_result:Module.cwrap("free_result","",["number"]),get_result_pointer:Module.cwrap("get_result_pointer","number",[]),get_result_size:Module.cwrap("get_result_size","number",[])},console.log("libwebp loaded, api version: ".concat(M.version()));case 2:case"end":return e.stop()}},e,this)}));var A=function(t){function a(t){var s;return Object(i.a)(this,a),(s=Object(c.a)(this,Object(o.a)(a).call(this,t))).handleSubmit=function(t){t.preventDefault(),s.setState({progress:0,errorMsg:"",isSubmitting:!0});var a=s.state,n=a.identifier,i=a.name,c=a.publisher,o=a.trayFile,l=a.stickersFiles;Object(h.a)(m.a.mark(function t(){var a,u,h,f,d,p,g;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(o,"tray");case 2:a=t.sent,u=[],h=Math.ceil(l.length/30),f=[],d=0;case 7:if(!(d<h)){t.next=22;break}if(u.push([]),t.t0=f,1!==h){t.next=14;break}t.t1=a,t.next=17;break;case 14:return t.next=16,j(a,"".concat(d+1));case 16:t.t1=t.sent;case 17:t.t2=t.t1,t.t0.push.call(t.t0,t.t2);case 19:d++,t.next=7;break;case 22:p=0;case 23:if(!(p<l.length)){t.next=32;break}return t.next=26,N(l[p],"stickers");case 26:g=t.sent,s.setState({progress:(p+1)/l.length*100}),u[Math.floor(p/30)].push(g);case 29:p++,t.next=23;break;case 32:h>1&&u[h-1].length<3&&(u[h-1]=Object(r.a)(u[h-2].splice(-(3-u[h-1].length))).concat(Object(r.a)(u[h-1]))),u.map(function(e,t){return{identifier:n+(0===t?"":"_".concat(t+1)),name:i+(0===t?"":" (".concat(t+1,")")),publisher:c,tray_image:f[t].replace("data:image/png;base64,",""),stickers:e.map(function(e){return{image_data:e.replace("data:image/webp;base64,","")}})}}).forEach(function(t){_("data:application/json;base64,".concat(e.from(JSON.stringify(t)).toString("base64")),"".concat(t.identifier,".json"),"application/json"),s.setState({isSubmitting:!1})});case 34:case"end":return t.stop()}},t,this)}))().catch(function(e){console.error(e),s.setState({errorMsg:e.message||t.toString(),isSubmitting:!1})})},s.handleImageChange=function(e,t){e.preventDefault(),"tray"===t?s.setState({trayFile:e.target.files[0]}):"stickers"===t&&s.setState({stickersFiles:e.target.files})},s.handleInputChange=function(e){s.setState(Object(n.a)({},e.target.id,e.target.value))},s.isFormValid=function(){return s.isIdentifierValid()&&s.state.identifier&&s.state.name&&s.state.publisher&&null!=s.state.trayFile&&s.state.stickersFiles&&s.state.stickersFiles.length>=3},s.isSubmittable=function(){return s.isFormValid()&&!s.state.isSubmitting},s.isIdentifierValid=function(){return/^[A-Za-z0-9-_.\s]*$/.test(s.state.identifier)},s.state={identifier:"",name:"",publisher:"",trayFile:null,stickersFiles:null,isSubmitting:!1,progress:0,errorMsg:""},s}return Object(l.a)(a,t),Object(s.a)(a,[{key:"render",value:function(){var e=this;return d.a.createElement(g.a,{onSubmit:function(t){return e.handleSubmit(t)}},d.a.createElement(g.a.Group,{as:w.a,controlId:"identifier"},d.a.createElement(g.a.Label,{column:!0,sm:4},"Identifier"),d.a.createElement(v.a,{sm:6},d.a.createElement(g.a.Control,{type:"text",required:!0,onChange:this.handleInputChange,isInvalid:!this.isIdentifierValid()}),d.a.createElement(g.a.Control.Feedback,{type:"invalid"},'Alphanumeric characters with ".", "_", "-" or " " only '))),d.a.createElement(g.a.Group,{as:w.a,controlId:"name"},d.a.createElement(g.a.Label,{column:!0,sm:4},"Pack Name"),d.a.createElement(v.a,{sm:6},d.a.createElement(g.a.Control,{type:"text",required:!0,onChange:this.handleInputChange}))),d.a.createElement(g.a.Group,{as:w.a,controlId:"publisher"},d.a.createElement(g.a.Label,{column:!0,sm:4},"Publisher"),d.a.createElement(v.a,{sm:6},d.a.createElement(g.a.Control,{type:"text",required:!0,onChange:this.handleInputChange}))),d.a.createElement(g.a.Group,{as:w.a,controlId:"formTrayFile"},d.a.createElement(g.a.Label,{column:!0,sm:4},"Tray Icon"),d.a.createElement(v.a,{sm:8},d.a.createElement("div",{className:"custom-file"},d.a.createElement(g.a.Control,{className:"custom-file-input",type:"file",required:!0,isValid:!1,onChange:function(t){return e.handleImageChange(t,"tray")},accept:"image/png"}),d.a.createElement(g.a.Label,{className:"custom-file-label"},this.state.trayFile?this.state.trayFile.name:"Choose file (PNG, any resolution)")))),d.a.createElement(g.a.Group,{as:w.a,controlId:"formStickersFiles"},d.a.createElement(g.a.Label,{column:!0,sm:4},"Stickers (3 or more images)"),d.a.createElement(v.a,{sm:8},d.a.createElement("div",{className:"custom-file"},d.a.createElement(g.a.Control,{className:"custom-file-input",type:"file",required:!0,multiple:!0,onChange:function(t){return e.handleImageChange(t,"stickers")},accept:"image/png"}),d.a.createElement(g.a.Label,{className:"custom-file-label"},this.state.stickersFiles&&this.state.stickersFiles.length>0?"".concat(this.state.stickersFiles.length," file(s) selected"):"Choose file (PNG, any resolution)")))),d.a.createElement(k.a,{type:"submit",disabled:!this.isSubmittable()},"Convert Images"),d.a.createElement(I.a,{style:{transition:"none",marginTop:"15px"},now:this.state.progress,hidden:!this.state.isSubmitting&&!this.state.errorMsg,variant:this.state.errorMsg?"danger":""}),d.a.createElement("p",{className:this.state.errorMsg?"text-danger":"text-success",hidden:!this.state.errorMsg&&100!==this.state.progress},this.state.errorMsg||"Images converted!"))}}]),a}(d.a.Component);t.a=A}).call(this,a(50).Buffer)},43:function(e,t,a){e.exports=a(94)},48:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),c=(a(48),a(15)),o=a(16),l=a(18),u=a(17),m=a(19),h=a(42),f=a.n(h),d=a(12),p=a.n(d),g=a(11),b=a.n(g),w=a(22),y=a.n(w),v=a(38),E=(a(74),function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{style:{marginTop:"20px"}},r.a.createElement(p.a,{className:"justify-content-md-center"},r.a.createElement(b.a,{lg:10},r.a.createElement(y.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(y.a.Brand,null,"WhatsApp Stickers Converter (Chrome Desktop only)")))),r.a.createElement(p.a,{className:"justify-content-md-center"},r.a.createElement(b.a,{lg:10},r.a.createElement(v.a,null))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.7a1ad63d.chunk.js.map