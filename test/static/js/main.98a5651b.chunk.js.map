{"version":3,"sources":["ImageUpload.js","App.js","serviceWorker.js","index.js"],"names":["jimp","require","download","api","convertURLToWebpURL","url","quality","Promise","resolve","reject","canvas","document","createElement","context","getContext","image","Image","addEventListener","width","height","drawImage","imageData","getImageData","p","create_buffer","Module","HEAP8","set","data","encode","resultPointer","get_result_pointer","resultSize","get_result_size","resultView","Uint8Array","buffer","result","free_result","destroy_buffer","btoa","String","fromCharCode","apply","convertImageDataToWebpURL","Math","ceil","src","addNumberToURL","URI","text","save","beginPath","arc","PI","fillStyle","fill","restore","font","textAlign","lineWidth","fillText","concat","toDataURL","resizeAndConvert","_callee4","input","px","toWebp","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_7___default","a","wrap","_context4","prev","next","abrupt","read","then","contain","getBase64Async","MIME_PNG","uri","_ref3","Object","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__","mark","_callee3","_webpUri","webpUri","_context3","length","console","error","sent","stop","this","_x6","arguments","loadFile","_callee6","file","type","_context6","reader","FileReader","onloadend","_callee5","_context5","t0","t1","t2","t3","t4","readAsArrayBuffer","onRuntimeInitialized","_callee","_context","version","cwrap","log","ImageUpload","props","_this","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__","call","handleSubmit","e","preventDefault","setState","progress","errorMsg","isSubmitting","downloadUrls","_this$state","state","identifier","name","publisher","trayFile","stickersFiles","_callee2","tray","stickersInPack","numOfPacks","trays","pack","i","sticker","_context2","push","floor","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","splice","map","index","tray_image","replace","stickers","image_data","forEach","Buffer","from","JSON","stringify","toString","prevState","Blob","catch","message","handleImageChange","target","files","handleInputChange","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","id","value","isFormValid","isIdentifierValid","isSubmittable","test","_this2","react__WEBPACK_IMPORTED_MODULE_9___default","react_bootstrap_lib_Form__WEBPACK_IMPORTED_MODULE_10___default","onSubmit","Group","as","Row","controlId","Label","column","sm","react_bootstrap_lib_Col__WEBPACK_IMPORTED_MODULE_12___default","Control","required","onChange","isInvalid","Feedback","className","isValid","accept","multiple","react_bootstrap_lib_Button__WEBPACK_IMPORTED_MODULE_13___default","disabled","react_bootstrap_lib_ProgressBar__WEBPACK_IMPORTED_MODULE_14___default","style","transition","marginTop","now","hidden","variant","React","Component","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","react_default","Container_default","Row_default","Col_default","lg","Navbar_default","bg","expand","marginBottom","Brand","Boolean","window","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.98a5651b.chunk.js","sourcesContent":["/* global Module */\n/* eslint-disable no-await-in-loop */\nimport React from 'react';\nimport Form from 'react-bootstrap/lib/Form';\nimport Row from 'react-bootstrap/lib/Row';\nimport Col from 'react-bootstrap/lib/Col';\nimport Button from 'react-bootstrap/lib/Button';\nimport ProgressBar from 'react-bootstrap/lib/ProgressBar';\n\nconst jimp = require('jimp');\nconst download = require('downloadjs');\n\nlet api = {};\nModule.onRuntimeInitialized = async () => {\n  api = {\n    version: Module.cwrap('version', 'number', []),\n    create_buffer: Module.cwrap('create_buffer', 'number', ['number', 'number']),\n    destroy_buffer: Module.cwrap('destroy_buffer', '', ['number']),\n    encode: Module.cwrap('encode', '', ['number', 'number', 'number', 'number']),\n    free_result: Module.cwrap('free_result', '', ['number']),\n    get_result_pointer: Module.cwrap('get_result_pointer', 'number', []),\n    get_result_size: Module.cwrap('get_result_size', 'number', []),\n  };\n  console.log(`libwebp loaded, api version: ${api.version()}`);\n};\n\n// using libwebp\nfunction convertImageDataToWebpURL(imageData, quality) {\n  const p = api.create_buffer(imageData.width, imageData.height);\n  Module.HEAP8.set(imageData.data, p);\n  api.encode(p, imageData.width, imageData.height, quality);\n  const resultPointer = api.get_result_pointer();\n  const resultSize = api.get_result_size();\n  const resultView = new Uint8Array(Module.HEAP8.buffer, resultPointer, resultSize);\n  const result = new Uint8Array(resultView);\n  api.free_result(resultPointer);\n  api.destroy_buffer(p);\n  return btoa(String.fromCharCode.apply(null, result));\n}\n\nfunction convertURLToWebpURL(url, quality) {\n  // eslint-disable-next-line consistent-return\n  return new Promise((resolve, reject) => {\n    if (url == null) return reject();\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const image = new Image();\n    image.addEventListener('load', () => {\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n      const useChrome = false;\n      if (useChrome) {\n        resolve(canvas.toDataURL('image/webp', quality));\n      } else {\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        resolve(convertImageDataToWebpURL(imageData, Math.ceil(quality * 100)));\n      }\n    }, false);\n    image.src = url;\n  });\n}\n\nfunction addNumberToURL(URI, text) {\n  // eslint-disable-next-line consistent-return\n  return new Promise(((resolve, reject) => {\n    if (URI == null) return reject();\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const image = new Image();\n    image.addEventListener('load', () => {\n      canvas.width = image.width;\n      canvas.height = image.height;\n\n      context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n      context.save();\n\n      // draw circle\n      context.beginPath();\n      context.arc(canvas.width - 0 - 16, canvas.height - 0 - 16, 16, 0, 2 * Math.PI);\n      context.fillStyle = 'rgba(53, 67, 90, 0.85)';\n      context.fill();\n\n      context.restore();\n\n      // draw number\n      context.font = '30px helvetica';\n      context.textAlign = 'center';\n      context.fillStyle = '#f7f7f7';\n      context.lineWidth = 2;\n      context.fillText(`${text}`, canvas.width - 0 - 16, canvas.height - 0 - 6);\n      resolve(canvas.toDataURL('image/png'));\n\n    }, false);\n    image.src = URI;\n  }));\n}\n\n\nasync function resizeAndConvert(input, px, toWebp) {\n  return jimp.read(input).then((image) => {\n    if (toWebp) {\n      return image.contain(px, px).getBase64Async(jimp.MIME_PNG)\n        .then(uri => convertURLToWebpURL(uri, 1).then(async (_webpUri) => {\n          let webpUri = _webpUri;\n\n          let quality = 1.0;\n          while (btoa(webpUri).length > 99999 && quality > 0.2) {\n            quality -= 0.08;\n            console.error(`WebP size ${Math.ceil(btoa(webpUri).length / 1024)}kb exceeded 100kb, resizing with quality ${quality}`);\n            // eslint-disable-next-line no-await-in-loop\n            webpUri = await convertURLToWebpURL(uri, quality);\n          }\n          return webpUri;\n        }));\n    }\n    return image.contain(px, px).getBase64Async(jimp.MIME_PNG);\n  });\n}\n\nasync function loadFile(file, type) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.onloadend = async () => {\n      try {\n        if (type === 'tray') {\n          resolve(await resizeAndConvert(reader.result, 96, false));\n        } else if (type === 'stickers') {\n          resolve(await resizeAndConvert(reader.result, 512, true));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  });\n}\n\nclass ImageUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      identifier: '',\n      name: '',\n      publisher: '',\n      trayFile: null,\n      stickersFiles: null,\n      isSubmitting: false,\n      progress: 0,\n      errorMsg: '',\n      downloadUrls: [],\n    };\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.setState({\n      progress: 0,\n      errorMsg: '',\n      isSubmitting: true,\n      downloadUrls: [],\n    });\n\n    const {\n      identifier, name, publisher, trayFile, stickersFiles,\n    } = this.state;\n\n    (async () => {\n      const tray = await loadFile(trayFile, 'tray');\n      const stickersInPack = [];\n\n      const numOfPacks = Math.ceil(stickersFiles.length / 30);\n      const trays = [];\n\n      for (let pack = 0; pack < numOfPacks; pack++) {\n        stickersInPack.push([]);\n        trays.push(numOfPacks === 1 ? tray : await addNumberToURL(tray, `${pack + 1}`));\n      }\n\n      for (let i = 0; i < stickersFiles.length; i++) {\n        const sticker = await loadFile(stickersFiles[i], 'stickers');\n        this.setState({ progress: (i + 1) / stickersFiles.length * 100 });\n        stickersInPack[Math.floor(i / 30)].push(sticker);\n      }\n\n      if (numOfPacks > 1 && stickersInPack[numOfPacks - 1].length < 3) {\n        stickersInPack[numOfPacks - 1] = [\n          ...stickersInPack[numOfPacks - 2].splice(-(3 - stickersInPack[numOfPacks - 1].length)),\n          ...stickersInPack[numOfPacks - 1],\n          console.log('test'),\n        ];\n      }\n\n      stickersInPack.map((pack, index) => ({\n        identifier: identifier + (index === 0 ? '' : `_${index + 1}`),\n        name: name + (index === 0 ? '' : ` (${index + 1})`),\n        publisher,\n        tray_image: trays[index].replace('data:image/png;base64,', ''),\n        stickers: pack.map(sticker => ({\n          image_data: sticker.replace('data:image/webp;base64,', ''),\n        })),\n      })).forEach((pack) => {\n        //\n        const url = `data:application/json;base64,${Buffer.from(JSON.stringify(pack)).toString('base64')}`;\n        download(url, `${pack.identifier}.json`, 'application/json');\n        this.setState(prevState => ({\n          downloadUrls: [...prevState.downloadUrls, new Blob([JSON.stringify(pack)], { type: 'application/json'})],\n        }));\n      });\n      this.setState({ isSubmitting: false });\n    })().catch((error) => {\n      console.error(error);\n      this.setState({\n        errorMsg: error.message || e.toString(),\n        isSubmitting: false,\n      });\n    });\n  };\n\n  handleImageChange = (e, type) => {\n    e.preventDefault();\n\n    if (type === 'tray') {\n      this.setState({\n        trayFile: e.target.files[0],\n      });\n\n\n      // for debugging photo\n      // setTimeout(async() => {\n      //   const tray = await loadFile(this.state.trayFile, 'tray');\n      //   const tray2 = await addNumberToURL(tray, '8');\n      //   this.setState({\n      //     imagePreviewUrl: tray2,\n      //   })\n      // }, 500)\n    } else if (type === 'stickers') {\n      this.setState({\n        stickersFiles: e.target.files,\n      });\n    }\n  };\n\n  handleInputChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value,\n    });\n  };\n\n  isFormValid = () => this.isIdentifierValid() && this.state.identifier && this.state.name && this.state.publisher\n    && this.state.trayFile != null && this.state.stickersFiles && this.state.stickersFiles.length >= 3;\n\n  isSubmittable = () => this.isFormValid() && !this.state.isSubmitting;\n\n  isIdentifierValid = () => /^[A-Za-z0-9-_.\\s]*$/.test(this.state.identifier);\n\n  render() {\n    return (\n      <Form onSubmit={e => this.handleSubmit(e)}>\n        <Form.Group as={Row} controlId=\"identifier\">\n          <Form.Label column sm={4}>Identifier</Form.Label>\n          <Col sm={6}>\n            <Form.Control type=\"text\" required onChange={this.handleInputChange} isInvalid={!this.isIdentifierValid()} />\n            <Form.Control.Feedback type=\"invalid\">\n              {'Alphanumeric characters with \".\", \"_\", \"-\" or \" \" only '}\n            </Form.Control.Feedback>\n          </Col>\n        </Form.Group>\n\n        <Form.Group as={Row} controlId=\"name\">\n          <Form.Label column sm={4}>Pack Name</Form.Label>\n          <Col sm={6}>\n            <Form.Control type=\"text\" required onChange={this.handleInputChange} />\n          </Col>\n        </Form.Group>\n\n        <Form.Group as={Row} controlId=\"publisher\">\n          <Form.Label column sm={4}>Publisher</Form.Label>\n          <Col sm={6}>\n            <Form.Control type=\"text\" required onChange={this.handleInputChange} />\n          </Col>\n        </Form.Group>\n\n        <Form.Group as={Row} controlId=\"formTrayFile\">\n          <Form.Label column sm={4}>Tray Icon</Form.Label>\n          <Col sm={8}>\n            <div className=\"custom-file\">\n              <Form.Control\n                className=\"custom-file-input\"\n                type=\"file\"\n                required\n                isValid={false}\n                onChange={e => this.handleImageChange(e, 'tray')}\n                accept=\"image/png\"\n              />\n              <Form.Label className=\"custom-file-label\">{this.state.trayFile ? this.state.trayFile.name : 'Choose file (PNG, any resolution)' }</Form.Label>\n            </div>\n          </Col>\n        </Form.Group>\n\n        <Form.Group as={Row} controlId=\"formStickersFiles\">\n          <Form.Label column sm={4}>Stickers (3 or more images)</Form.Label>\n          <Col sm={8}>\n            <div className=\"custom-file\">\n              <Form.Control\n                className=\"custom-file-input\"\n                type=\"file\"\n                required\n                multiple\n                onChange={e => this.handleImageChange(e, 'stickers')}\n                accept=\"image/png\"\n              />\n              <Form.Label className=\"custom-file-label\">{this.state.stickersFiles && this.state.stickersFiles.length > 0 ? `${this.state.stickersFiles.length} file(s) selected` : 'Choose file (PNG, any resolution)' }</Form.Label>\n            </div>\n          </Col>\n        </Form.Group>\n        <Button type=\"submit\" disabled={!this.isSubmittable()}>Convert Images</Button>\n        <ProgressBar style={{ transition: 'none', marginTop: '15px' }} now={this.state.progress} hidden={!this.state.isSubmitting && !this.state.errorMsg} variant={this.state.errorMsg ? 'danger' : ''} />\n        <p\n          className={this.state.errorMsg ? 'text-danger' : 'text-success'}\n          hidden={!this.state.errorMsg && this.state.progress !== 100}\n        >\n          {this.state.errorMsg || 'Images converted!'}\n        </p>\n      </Form>\n    );\n  }\n}\n\n\nexport default ImageUpload;\n","import React from 'react';\nimport Container from 'react-bootstrap/lib/Container';\nimport Row from 'react-bootstrap/lib/Row';\nimport Col from 'react-bootstrap/lib/Col';\nimport Navbar from 'react-bootstrap/lib/Navbar';\nimport ImageUpload from './ImageUpload';\n\n// import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n\n      <Container style={{ marginTop: '20px' }}>\n        <Row className=\"justify-content-md-center\">\n          <Col lg={10}>\n            <Navbar bg=\"light\" expand=\"lg\" style={{ marginBottom: '20px' }}>\n              <Navbar.Brand>WhatsApp Stickers Converter (Chrome Desktop only)</Navbar.Brand>\n            </Navbar>\n          </Col>\n        </Row>\n\n        <Row className=\"justify-content-md-center\">\n          <Col lg={10}>\n            <ImageUpload />\n          </Col>\n        </Row>\n      </Container>\n\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}