(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){"use strict";(function(e){var n=a(22),r=a(10),s=a.n(r),i=a(24),c=a(15),l=a(16),o=a(18),u=a(17),m=a(19),h=a(14),g=a(0),f=a.n(g),p=a(5),d=a.n(p),b=a(12),k=a.n(b),E=a(11),y=a.n(E),w=a(40),v=a.n(w),x=a(41),C=a.n(x),S=a(56),I=a(57);function j(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),s=r.getContext("2d"),i=new Image;i.addEventListener("load",function(){r.width=i.width,r.height=i.height,s.drawImage(i,0,0,r.width,r.height),a(r.toDataURL("image/webp",t))},!1),i.src=e})}function F(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),s=r.getContext("2d"),i=new Image;i.addEventListener("load",function(){r.width=i.width,r.height=i.height,s.drawImage(i,0,0,r.width,r.height),s.save(),s.beginPath(),s.arc(r.width-0-16,r.height-0-16,16,0,2*Math.PI),s.fillStyle="rgba(63,127,191,0.45)",s.fill(),s.restore(),s.font="30px helvetica",s.textAlign="center",s.fillStyle="#262626",s.lineWidth=2,s.fillText(t,r.width-0-16,r.height-0-6),a(r.toDataURL("image/png"))},!1),i.src=e})}function O(e,t,a){return M.apply(this,arguments)}function M(){return(M=Object(h.a)(s.a.mark(function e(t,a,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.read(t).then(function(e){return n?e.contain(a,a).getBase64Async(S.MIME_PNG).then(function(e){return j(e,1).then(function(){var t=Object(h.a)(s.a.mark(function t(a){var n,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=a,r=1;case 2:if(!(btoa(n).length>99999&&r>.2)){t.next=10;break}return r-=.08,console.error("WebP size ".concat(Math.ceil(btoa(n).length/1024),"kb exceeded 100kb, resizing with quality ").concat(r)),t.next=7,j(e,r);case 7:n=t.sent,t.next=2;break;case 10:return t.abrupt("return",n);case 11:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())}):e.contain(a,a).getBase64Async(S.MIME_PNG)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e,t){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onloadend=Object(h.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"tray"!==a){t.next=9;break}return t.t0=e,t.next=5,O(r.result,96,!1);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 9:if("stickers"!==a){t.next=15;break}return t.t2=e,t.next=13,O(r.result,512,!0);case 13:t.t3=t.sent,(0,t.t2)(t.t3);case 15:t.next=20;break;case 17:t.prev=17,t.t4=t.catch(0),n(t.t4);case 20:case"end":return t.stop()}},t,this,[[0,17]])})),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var P=function(t){function a(t){var r;return Object(c.a)(this,a),(r=Object(o.a)(this,Object(u.a)(a).call(this,t)))._handleSubmit=function(t){t.preventDefault(),r.setState({progress:0,errorMsg:"",isSubmitting:!0}),Object(h.a)(s.a.mark(function t(){var a,n,c,l,o,u,m;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(r.state.trayFile,"tray");case 2:a=t.sent,n=[],c=Math.ceil(r.state.stickersFiles.length/30),l=[],o=0;case 7:if(!(o<c)){t.next=22;break}if(n.push([]),t.t0=l,1!==c){t.next=14;break}t.t1=a,t.next=17;break;case 14:return t.next=16,F(a,o+1+"");case 16:t.t1=t.sent;case 17:t.t2=t.t1,t.t0.push.call(t.t0,t.t2);case 19:o++,t.next=7;break;case 22:u=0;case 23:if(!(u<r.state.stickersFiles.length)){t.next=32;break}return t.next=26,_(r.state.stickersFiles[u],"stickers");case 26:m=t.sent,r.setState({progress:(u+1)/r.state.stickersFiles.length*100}),n[Math.floor(u/30)].push(m);case 29:u++,t.next=23;break;case 32:c>1&&n[c-1].length<3&&(n[c-1]=Object(i.a)(n[c-2].splice(-(3-n[c-1].length))).concat(Object(i.a)(n[c-1]))),n.map(function(e,t){return{identifier:r.state.identifier+(0===t?"":"_"+(t+1)),name:r.state.name+(0===t?"":" ("+(t+1)+")"),publisher:r.state.publisher,tray_image:l[t].replace("data:image/png;base64,",""),stickers:e.map(function(e){return{image_data:e.replace("data:image/webp;base64,","")}})}}).forEach(function(t){I("data:application/json;base64,"+new e(JSON.stringify(t)).toString("base64"),"".concat(t.identifier,".json"),"application/json"),r.setState({isSubmitting:!1})});case 34:case"end":return t.stop()}},t,this)}))().catch(function(e){console.error(e),r.setState({errorMsg:e.message||e.toString(),isSubmitting:!1})})},r._handleImageChange=function(e,t){e.preventDefault(),"tray"===t?r.setState({trayFile:e.target.files[0]}):"stickers"===t&&r.setState({stickersFiles:e.target.files})},r._handleInputChange=function(e){r.setState(Object(n.a)({},e.target.id,e.target.value))},r.isFormValid=function(){return r.state.identifier&&r.state.name&&r.state.publisher&&null!=r.state.trayFile&&r.state.stickersFiles&&r.state.stickersFiles.length>=3},r.isSubmittable=function(){return r.isFormValid()&&!r.state.isSubmitting},r.state={identifier:"",name:"",publisher:"",trayFile:null,stickersFiles:null,isSubmitting:!1,progress:0,errorMsg:""},r}return Object(m.a)(a,t),Object(l.a)(a,[{key:"render",value:function(){var e=this;return f.a.createElement(d.a,{onSubmit:function(t){return e._handleSubmit(t)}},f.a.createElement(d.a.Group,{as:k.a,controlId:"identifier"},f.a.createElement(d.a.Label,{column:!0,sm:4},"Identifier"),f.a.createElement(y.a,{sm:6},f.a.createElement(d.a.Control,{type:"text",required:!0,onChange:this._handleInputChange,isInvalid:!/^[A-Za-z0-9-_.\s]*$/.test(this.state.identifier)}),f.a.createElement(d.a.Control.Feedback,{type:"invalid"},'Alphanumeric characters with ".", "_", "-" or " " only '))),f.a.createElement(d.a.Group,{as:k.a,controlId:"name"},f.a.createElement(d.a.Label,{column:!0,sm:4},"Pack Name"),f.a.createElement(y.a,{sm:6},f.a.createElement(d.a.Control,{type:"text",required:!0,onChange:this._handleInputChange}))),f.a.createElement(d.a.Group,{as:k.a,controlId:"publisher"},f.a.createElement(d.a.Label,{column:!0,sm:4},"Publisher"),f.a.createElement(y.a,{sm:6},f.a.createElement(d.a.Control,{type:"text",required:!0,onChange:this._handleInputChange}))),f.a.createElement(d.a.Group,{as:k.a,controlId:"formTrayFile"},f.a.createElement(d.a.Label,{column:!0,sm:4},"Tray Icon"),f.a.createElement(y.a,{sm:8},f.a.createElement("div",{className:"custom-file"},f.a.createElement(d.a.Control,{className:"custom-file-input",type:"file",required:!0,isValid:!1,onChange:function(t){return e._handleImageChange(t,"tray")},accept:"image/png"}),f.a.createElement(d.a.Label,{className:"custom-file-label"},this.state.trayFile?this.state.trayFile.name:"Choose file (PNG, any resolution)")))),f.a.createElement(d.a.Group,{as:k.a,controlId:"formStickersFiles"},f.a.createElement(d.a.Label,{column:!0,sm:4},"Stickers (3 or more images)"),f.a.createElement(y.a,{sm:8},f.a.createElement("div",{className:"custom-file"},f.a.createElement(d.a.Control,{className:"custom-file-input",type:"file",required:!0,multiple:!0,onChange:function(t){return e._handleImageChange(t,"stickers")},accept:"image/png"}),f.a.createElement(d.a.Label,{className:"custom-file-label"},this.state.stickersFiles&&this.state.stickersFiles.length>0?"".concat(this.state.stickersFiles.length," file(s) selected"):"Choose file (PNG, any resolution)")))),f.a.createElement(v.a,{type:"submit",disabled:!this.isSubmittable()},"Convert Images"),f.a.createElement(C.a,Object(n.a)({style:{transition:"none"},now:this.state.progress,hidden:!this.state.isSubmitting&&!this.state.errorMsg,variant:this.state.errorMsg?"danger":""},"style",{marginTop:"15px"})),f.a.createElement("p",{className:this.state.errorMsg?"text-danger":"text-success",hidden:!this.state.errorMsg&&100!==this.state.progress},this.state.errorMsg||"Images converted!"),f.a.createElement("img",{src:this.state.imagePreviewUrl||""}))}}]),a}(f.a.Component);t.a=P}).call(this,a(50).Buffer)},43:function(e,t,a){e.exports=a(94)},48:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),i=a.n(s),c=(a(48),a(15)),l=a(16),o=a(18),u=a(17),m=a(19),h=a(39),g=a(42),f=a.n(g),p=a(12),d=a.n(p),b=a(11),k=a.n(b),E=a(23),y=a.n(E),w=(a(74),function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(f.a,{style:{marginTop:"20px"}},r.a.createElement(d.a,{className:"justify-content-md-center"},r.a.createElement(k.a,{lg:10},r.a.createElement(y.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(y.a.Brand,null,"WhatsApp Stickers Converter (Chrome Desktop only)")))),r.a.createElement(d.a,{className:"justify-content-md-center"},r.a.createElement(k.a,{lg:10},r.a.createElement(h.a,null))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.9997681e.chunk.js.map