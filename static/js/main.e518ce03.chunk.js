(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(e,t,a){"use strict";(function(e){var n=a(22),r=a(12),s=a.n(r),i=a(24),c=a(15),o=a(16),l=a(18),u=a(17),m=a(19),h=a(14),p=a(0),g=a.n(p),d=a(5),f=a.n(d),b=a(11),E=a.n(b),y=a(10),k=a.n(y),v=a(40),w=a.n(v),x=a(41),C=a.n(x),S=a(56),j=a(57);function F(e,t){return new Promise(function(a,n){if(null==e)return n();var r=document.createElement("canvas"),s=r.getContext("2d"),i=new Image;i.addEventListener("load",function(){r.width=i.width,r.height=i.height,s.drawImage(i,0,0,r.width,r.height),a(r.toDataURL("image/webp",t))},!1),i.src=e})}function I(e,t,a){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(s.a.mark(function e(t,a,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.read(t).then(function(e){return n?e.contain(a,a).getBase64Async(S.MIME_PNG).then(function(e){return F(e,1).then(function(t){return btoa(t).length>99999?(console.error("WebP size exceeded 100kb, resizing again"),F(e,.92).then(function(e){if(btoa(e).length>99999)throw new Error("Converted WebP size exceeded 100kb");return Promise.resolve(e)})):Promise.resolve(t)})}):e.contain(a,a).getBase64Async(S.MIME_PNG)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e,t){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(s.a.mark(function e(t,a){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new FileReader;r.onloadend=Object(h.a)(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"tray"!==a){t.next=9;break}return t.t0=e,t.next=5,I(r.result,96,!1);case 5:t.t1=t.sent,(0,t.t0)(t.t1),t.next=15;break;case 9:if("stickers"!==a){t.next=15;break}return t.t2=e,t.next=13,I(r.result,512,!0);case 13:t.t3=t.sent,(0,t.t2)(t.t3);case 15:t.next=20;break;case 17:t.prev=17,t.t4=t.catch(0),n(t.t4);case 20:case"end":return t.stop()}},t,this,[[0,17]])})),r.readAsArrayBuffer(t)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var M=function(t){function a(t){var r;return Object(c.a)(this,a),(r=Object(l.a)(this,Object(u.a)(a).call(this,t)))._handleSubmit=function(t){t.preventDefault(),r.setState({progress:0,errorMsg:"",isSubmitting:!0}),Object(h.a)(s.a.mark(function t(){var a,n,c,o,l,u;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_(r.state.trayFile,"tray");case 2:for(a=t.sent,n=[],c=Math.ceil(r.state.stickersFiles.length/30),o=0;o<c;o++)n.push([]);l=0;case 7:if(!(l<r.state.stickersFiles.length)){t.next=16;break}return t.next=10,_(r.state.stickersFiles[l],"stickers");case 10:u=t.sent,r.setState({progress:(l+1)/r.state.stickersFiles.length*100}),n[Math.floor(l/30)].push(u);case 13:l++,t.next=7;break;case 16:c>1&&n[c-1].length<3&&(n[c-1]=Object(i.a)(n[c-2].splice(-(3-n[c-1].length))).concat(Object(i.a)(n[c-1]))),n.map(function(e,t){return{identifier:r.state.identifier+(0===t?"":"_"+(t+1)),name:r.state.name+(0===t?"":" ("+(t+1)+")"),publisher:r.state.publisher,tray_image:a.replace("data:image/png;base64,",""),stickers:e.map(function(e){return{image_data:e.replace("data:image/webp;base64,","")}})}}).forEach(function(t){j("data:application/json;base64,"+new e(JSON.stringify(t)).toString("base64"),"".concat(t.identifier,".json"),"application/json"),r.setState({isSubmitting:!1})});case 18:case"end":return t.stop()}},t,this)}))().catch(function(e){console.error(e),r.setState({errorMsg:e.message||e.toString(),isSubmitting:!1})})},r._handleImageChange=function(e,t){e.preventDefault(),"tray"===t?r.setState({trayFile:e.target.files[0]}):"stickers"===t&&r.setState({stickersFiles:e.target.files})},r._handleInputChange=function(e){r.setState(Object(n.a)({},e.target.id,e.target.value))},r.isFormValid=function(){return r.state.identifier&&r.state.name&&r.state.publisher&&null!=r.state.trayFile&&r.state.stickersFiles&&r.state.stickersFiles.length>=3},r.isSubmittable=function(){return r.isFormValid()&&!r.state.isSubmitting},r.state={identifier:"",name:"",publisher:"",trayFile:null,stickersFiles:null,isSubmitting:!1,progress:0,errorMsg:""},r}return Object(m.a)(a,t),Object(o.a)(a,[{key:"render",value:function(){var e=this;return g.a.createElement(f.a,{onSubmit:function(t){return e._handleSubmit(t)}},g.a.createElement(f.a.Group,{as:E.a,controlId:"identifier"},g.a.createElement(f.a.Label,{column:!0,sm:4},"Identifier"),g.a.createElement(k.a,{sm:6},g.a.createElement(f.a.Control,{type:"text",required:!0,onChange:this._handleInputChange,isInvalid:!/^[A-Za-z0-9-_.\s]*$/.test(this.state.identifier)}),g.a.createElement(f.a.Control.Feedback,{type:"invalid"},'Alphanumeric characters with ".", "_", "-" or " " only '))),g.a.createElement(f.a.Group,{as:E.a,controlId:"name"},g.a.createElement(f.a.Label,{column:!0,sm:4},"Pack Name"),g.a.createElement(k.a,{sm:6},g.a.createElement(f.a.Control,{type:"text",required:!0,onChange:this._handleInputChange}))),g.a.createElement(f.a.Group,{as:E.a,controlId:"publisher"},g.a.createElement(f.a.Label,{column:!0,sm:4},"Publisher"),g.a.createElement(k.a,{sm:6},g.a.createElement(f.a.Control,{type:"text",required:!0,onChange:this._handleInputChange}))),g.a.createElement(f.a.Group,{as:E.a,controlId:"formTrayFile"},g.a.createElement(f.a.Label,{column:!0,sm:4},"Tray Icon"),g.a.createElement(k.a,{sm:8},g.a.createElement("div",{className:"custom-file"},g.a.createElement(f.a.Control,{className:"custom-file-input",type:"file",required:!0,isValid:!1,onChange:function(t){return e._handleImageChange(t,"tray")},accept:"image/png"}),g.a.createElement(f.a.Label,{className:"custom-file-label"},this.state.trayFile?this.state.trayFile.name:"Choose file (PNG, any resolution)")))),g.a.createElement(f.a.Group,{as:E.a,controlId:"formStickersFiles"},g.a.createElement(f.a.Label,{column:!0,sm:4},"Stickers (3 or more images)"),g.a.createElement(k.a,{sm:8},g.a.createElement("div",{className:"custom-file"},g.a.createElement(f.a.Control,{className:"custom-file-input",type:"file",required:!0,multiple:!0,onChange:function(t){return e._handleImageChange(t,"stickers")},accept:"image/png"}),g.a.createElement(f.a.Label,{className:"custom-file-label"},this.state.stickersFiles&&this.state.stickersFiles.length>0?"".concat(this.state.stickersFiles.length," file(s) selected"):"Choose file (PNG, any resolution)")))),g.a.createElement(w.a,{type:"submit",disabled:!this.isSubmittable()},"Convert Images"),g.a.createElement(C.a,Object(n.a)({style:{transition:"none"},now:this.state.progress,hidden:!this.state.isSubmitting&&!this.state.errorMsg,variant:this.state.errorMsg?"danger":""},"style",{marginTop:"15px"})),g.a.createElement("p",{className:this.state.errorMsg?"text-danger":"text-success",hidden:!this.state.errorMsg&&100!==this.state.progress},this.state.errorMsg||"Images converted!"))}}]),a}(g.a.Component);t.a=M}).call(this,a(50).Buffer)},43:function(e,t,a){e.exports=a(94)},48:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(21),i=a.n(s),c=(a(48),a(15)),o=a(16),l=a(18),u=a(17),m=a(19),h=a(39),p=a(42),g=a.n(p),d=a(11),f=a.n(d),b=a(10),E=a.n(b),y=a(23),k=a.n(y),v=(a(74),function(e){function t(e){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,{style:{marginTop:"20px"}},r.a.createElement(f.a,{className:"justify-content-md-center"},r.a.createElement(E.a,{lg:10},r.a.createElement(k.a,{bg:"light",expand:"lg",style:{marginBottom:"20px"}},r.a.createElement(k.a.Brand,null,"WhatsApp Stickers Converter (Chrome Desktop only)")))),r.a.createElement(f.a,{className:"justify-content-md-center"},r.a.createElement(E.a,{lg:10},r.a.createElement(h.a,null))))}}]),t}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[43,2,1]]]);
//# sourceMappingURL=main.e518ce03.chunk.js.map