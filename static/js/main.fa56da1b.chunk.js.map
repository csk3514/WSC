{"version":3,"sources":["ImageUpload.js","App.js","serviceWorker.js","index.js"],"names":["jimp","require","download","convertURIToWebpURI","URI","quality","Promise","resolve","reject","canvas","document","createElement","context","getContext","image","Image","addEventListener","width","height","drawImage","toDataURL","src","addTextToUri","text","save","beginPath","arc","Math","PI","fillStyle","fill","restore","font","textAlign","lineWidth","fillText","resizeAndConvert","_callee3","input","px","toWebp","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","a","wrap","_context3","prev","next","abrupt","read","then","contain","getBase64Async","MIME_PNG","uri","_ref2","Object","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_8__","mark","_callee2","_webpUri","webpUri","_context2","btoa","length","console","error","concat","ceil","sent","stop","this","_x6","apply","arguments","loadFile","_callee5","file","type","_context5","reader","FileReader","onloadend","_callee4","_context4","t0","result","t1","t2","t3","t4","readAsArrayBuffer","ImageUpload","props","_this","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","call","_handleSubmit","e","preventDefault","setState","progress","errorMsg","isSubmitting","_callee","tray","stickersInPack","numOfPacks","trays","pack","i","sticker","_context","state","trayFile","stickersFiles","push","floor","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_2__","splice","map","index","identifier","name","publisher","tray_image","replace","stickers","image_data","forEach","Buffer","JSON","stringify","toString","catch","message","_handleImageChange","target","files","_handleInputChange","_Users_jlaw_workspace_personal_whatsapp_stickers_convert_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","id","value","isFormValid","isSubmittable","_this2","react__WEBPACK_IMPORTED_MODULE_9___default","react_bootstrap_lib_Form__WEBPACK_IMPORTED_MODULE_10___default","onSubmit","Group","as","Row","controlId","Label","column","sm","react_bootstrap_lib_Col__WEBPACK_IMPORTED_MODULE_12___default","Control","required","onChange","isInvalid","test","Feedback","className","isValid","accept","multiple","react_bootstrap_lib_Button__WEBPACK_IMPORTED_MODULE_13___default","disabled","react_bootstrap_lib_ProgressBar__WEBPACK_IMPORTED_MODULE_14___default","style","transition","now","hidden","variant","marginTop","imagePreviewUrl","React","Component","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","react_default","Container_default","Row_default","Col_default","lg","Navbar_default","bg","expand","marginBottom","Brand","Boolean","window","location","hostname","match","ReactDOM","render","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.fa56da1b.chunk.js","sourcesContent":["import React from 'react';\nimport Form from 'react-bootstrap/lib/Form';\nimport Row from 'react-bootstrap/lib/Row';\nimport Col from 'react-bootstrap/lib/Col';\nimport Button from 'react-bootstrap/lib/Button';\nimport ProgressBar from 'react-bootstrap/lib/ProgressBar';\n\nconst jimp = require('jimp');\nconst download = require('downloadjs');\n\nfunction convertURIToWebpURI(URI, quality) {\n  return new Promise(function(resolve, reject) {\n    if (URI == null) return reject();\n    var canvas = document.createElement('canvas'),\n      context = canvas.getContext('2d'),\n      image = new Image();\n    image.addEventListener('load', function() {\n      canvas.width = image.width;\n      canvas.height = image.height;\n      context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n      resolve(canvas.toDataURL(\"image/webp\", quality));\n    }, false);\n    image.src = URI;\n  });\n}\n\nfunction addTextToUri(URI, text) {\n  return new Promise(function(resolve, reject) {\n    if (URI == null) return reject();\n    var canvas = document.createElement('canvas'),\n      context = canvas.getContext('2d'),\n      image = new Image();\n    image.addEventListener('load', function() {\n      canvas.width = image.width;\n      canvas.height = image.height;\n\n      context.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n      context.save();\n\n      context.beginPath();\n      context.arc(canvas.width - 0 - 16, canvas.height - 0 - 16, 16, 0, 2 * Math.PI);\n      // context.fillStyle = 'rgba(63,127,191,0.6)';\n      context.fillStyle = 'rgba(53, 67, 90, 0.85)';\n      context.fill();\n\n      context.restore();\n\n      context.font = '30px helvetica';\n      context.textAlign = 'center';\n      // context.fillStyle = '#262626';\n      context.fillStyle = '#f7f7f7';\n      context.lineWidth = 2;\n      context.fillText(text, canvas.width - 0 - 16, canvas.height - 0 - 6);\n      resolve(canvas.toDataURL(\"image/png\"));\n    }, false);\n    image.src = URI;\n  });\n}\n\n\nasync function resizeAndConvert(input, px, toWebp) {\n  return jimp.read(input).then(image => {\n    if (toWebp) {\n      return image.contain(px, px).getBase64Async(jimp.MIME_PNG)\n        .then(uri => convertURIToWebpURI(uri, 1).then(async (_webpUri) => {\n          let webpUri = _webpUri;\n\n          let quality = 1.0;\n          while (btoa(webpUri).length > 99999 && quality > 0.2) {\n            quality -= 0.08;\n            console.error(`WebP size ${Math.ceil(btoa(webpUri).length / 1024)}kb exceeded 100kb, resizing with quality ${quality}`);\n            webpUri = await convertURIToWebpURI(uri, quality);\n          }\n          return webpUri;\n        }))\n    }\n    return image.contain(px, px).getBase64Async(jimp.MIME_PNG);\n  })\n}\n\nasync function loadFile(file, type) {\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader();\n\n    reader.onloadend = async () => {\n      try {\n        if (type === 'tray') {\n          resolve(await resizeAndConvert(reader.result, 96, false));\n        } else if (type === 'stickers') {\n          resolve(await resizeAndConvert(reader.result, 512, true));\n        }\n      } catch (e) {\n        reject(e);\n      }\n    };\n    reader.readAsArrayBuffer(file);\n  }\n)\n}\n\nclass ImageUpload extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      identifier: '',\n      name: '',\n      publisher: '',\n      trayFile: null,\n      stickersFiles: null,\n      isSubmitting: false,\n      progress: 0,\n      errorMsg: '',\n    };\n  }\n\n  _handleSubmit = (e) => {\n    e.preventDefault();\n\n    this.setState({\n      progress: 0,\n      errorMsg: '',\n      isSubmitting: true,\n    });\n\n    (async () => {\n\n\n      const tray = await loadFile(this.state.trayFile, 'tray');\n      const stickersInPack = [];\n\n      const numOfPacks = Math.ceil(this.state.stickersFiles.length / 30);\n      const trays = [];\n\n      for (let pack = 0; pack < numOfPacks; pack++) {\n        stickersInPack.push([]);\n        trays.push(numOfPacks === 1 ? tray : await addTextToUri(tray, (pack + 1) + ''));\n      }\n\n      for (let i = 0; i < this.state.stickersFiles.length; i++) {\n        const sticker = await loadFile(this.state.stickersFiles[i], 'stickers');\n        this.setState({ progress: (i + 1) / this.state.stickersFiles.length * 100 });\n        stickersInPack[Math.floor(i / 30)].push(sticker);\n      }\n\n      if (numOfPacks > 1 && stickersInPack[numOfPacks - 1].length < 3) {\n        stickersInPack[numOfPacks - 1] = [\n          ...stickersInPack[numOfPacks - 2].splice(-(3 - stickersInPack[numOfPacks - 1].length)),\n          ...stickersInPack[numOfPacks - 1],\n        ];\n      }\n\n      stickersInPack.map((pack, index) => {\n        return {\n          'identifier': this.state.identifier + (index === 0 ? '' : '_' + (index + 1)),\n          'name': this.state.name + (index === 0 ? '' : ' (' + (index + 1) + ')'),\n          'publisher': this.state.publisher,\n          'tray_image': trays[index].replace('data:image/png;base64,', ''),\n          'stickers': pack.map(sticker => {\n            return {\n              image_data: sticker.replace('data:image/webp;base64,', ''),\n            }\n          }),\n        };\n      }).forEach(pack => {\n        download('data:application/json;base64,' + new Buffer(JSON.stringify(pack)).toString('base64'), `${pack.identifier}.json`, 'application/json')\n        this.setState({ isSubmitting: false });\n      });\n\n    })().catch((e) => {\n      console.error(e);\n      this.setState({\n        errorMsg: e.message || e.toString(),\n        isSubmitting: false,\n      });\n    });\n  };\n\n  _handleImageChange = (e, type) =>{\n    e.preventDefault();\n\n    if (type === 'tray') {\n      this.setState({\n        trayFile: e.target.files[0]\n      });\n\n\n      // for debugging photo\n      // setTimeout(async() => {\n      //   const tray = await loadFile(this.state.trayFile, 'tray');\n      //   const tray2 = await addTextToUri(tray, '8');\n      //   this.setState({\n      //     imagePreviewUrl: tray2,\n      //   })\n      // }, 500)\n\n    } else if (type === 'stickers') {\n      this.setState({\n        stickersFiles: e.target.files\n      });\n    }\n\n  };\n\n  _handleInputChange = (e) => {\n    this.setState({\n      [e.target.id]: e.target.value,\n    });\n  };\n\n  isFormValid = () => {\n    return this.state.identifier && this.state.name && this.state.publisher && this.state.trayFile != null && this.state.stickersFiles && this.state.stickersFiles.length >= 3;\n  };\n\n  isSubmittable = () => {\n    return this.isFormValid() && !this.state.isSubmitting;\n  }\n\n  render() {\n    return (\n        <Form onSubmit={(e)=>this._handleSubmit(e)}>\n          <Form.Group as={Row} controlId=\"identifier\">\n            <Form.Label column sm={4}>Identifier</Form.Label>\n            <Col sm={6}>\n              <Form.Control type=\"text\" required onChange={this._handleInputChange} isInvalid={!/^[A-Za-z0-9-_.\\s]*$/.test(this.state.identifier)} />\n              <Form.Control.Feedback type=\"invalid\">\n                {'Alphanumeric characters with \".\", \"_\", \"-\" or \" \" only '}\n              </Form.Control.Feedback>\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} controlId=\"name\">\n            <Form.Label column sm={4}>Pack Name</Form.Label>\n            <Col sm={6}>\n              <Form.Control type=\"text\" required onChange={this._handleInputChange} />\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} controlId=\"publisher\">\n            <Form.Label column sm={4}>Publisher</Form.Label>\n            <Col sm={6}>\n              <Form.Control type=\"text\" required onChange={this._handleInputChange} />\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} controlId=\"formTrayFile\">\n            <Form.Label column sm={4}>Tray Icon</Form.Label>\n            <Col sm={8}>\n              <div className=\"custom-file\">\n                <Form.Control\n                  className=\"custom-file-input\"\n                  type=\"file\"\n                  required\n                  isValid={false}\n                  onChange={(e)=>this._handleImageChange(e, 'tray')}\n                  accept=\"image/png\"\n                />\n                <Form.Label className=\"custom-file-label\">{this.state.trayFile ? this.state.trayFile.name : 'Choose file (PNG, any resolution)' }</Form.Label>\n              </div>\n            </Col>\n          </Form.Group>\n\n          <Form.Group as={Row} controlId=\"formStickersFiles\">\n            <Form.Label column sm={4}>Stickers (3 or more images)</Form.Label>\n            <Col sm={8}>\n              <div className=\"custom-file\">\n                <Form.Control\n                  className=\"custom-file-input\"\n                  type=\"file\"\n                  required\n                  multiple\n                  onChange={(e)=>this._handleImageChange(e, 'stickers')}\n                  accept=\"image/png\"\n                />\n                <Form.Label className=\"custom-file-label\">{this.state.stickersFiles && this.state.stickersFiles.length > 0 ? `${this.state.stickersFiles.length} file(s) selected` : 'Choose file (PNG, any resolution)' }</Form.Label>\n              </div>\n            </Col>\n          </Form.Group>\n          <Button type=\"submit\" disabled={!this.isSubmittable()}>Convert Images</Button>\n          <ProgressBar style={{transition: 'none'}} now={this.state.progress} hidden={!this.state.isSubmitting && !this.state.errorMsg} variant={this.state.errorMsg ? 'danger' : ''} style={{marginTop: '15px'}} />\n          <p\n            className={this.state.errorMsg ? \"text-danger\" : \"text-success\"}\n            hidden={!this.state.errorMsg && this.state.progress !== 100}>{this.state.errorMsg || 'Images converted!'}</p>\n          <img src={this.state.imagePreviewUrl || ''} />\n        </Form>\n    )\n  }\n}\n\n\nexport default ImageUpload\n","import React from 'react';\nimport ImageUpload from './ImageUpload';\nimport Container from 'react-bootstrap/lib/Container';\nimport Row from 'react-bootstrap/lib/Row';\nimport Col from 'react-bootstrap/lib/Col';\nimport Navbar from 'react-bootstrap/lib/Navbar';\n\n// import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css'\n\nclass App extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n\n          <Container style={{marginTop: '20px'}}>\n            <Row className=\"justify-content-md-center\">\n              <Col lg={10}>\n                <Navbar bg=\"light\" expand=\"lg\" style={{marginBottom: '20px'}}>\n                  <Navbar.Brand>WhatsApp Stickers Converter (Chrome Desktop only)</Navbar.Brand>\n                </Navbar>\n              </Col>\n            </Row>\n\n            <Row className=\"justify-content-md-center\">\n              <Col lg={10}>\n                <ImageUpload></ImageUpload>\n              </Col>\n            </Row>\n          </Container>\n\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}